设传感器接收端位置为：
$$
s_i = [x_i, y_i]
$$
目标位置为：
$$
r_i = [x, y]
$$
由于TOA是通过目标发出信号，接收端接收到该信号这一过程的时间差来判断目标的位置。首先声明着里的信号是声音信号，所以传播速度在空气中假定为$c = 340\quad m/s$。其次这里目标发送端和本地接收端的时钟并未同步，例如目的接收端的时间为2s时，发送端的时钟为0s，那么当发送的信号经过了10s后到达接收端，接收端当时为12s，但是发送端却认为发送的信号时从0s开始发送的，所以就会出现误差，认为该信号传输了12s。也就是10 + 2s。

以上，假设目标在当前位置$[x, y]$发送了信号，经过$t_i$时间到达接收端，但由于目标与地标基站的时钟并不同步，所以会有一个$delay$的时间，我们定义把接收站接收到的时间差叫做$T_i$，把信号真实飞行的时间差叫做$t_i$，把时钟误差叫做$Delay$。关系如下：
$$
T_i = t_i + delay
$$
由于TOA定位的特性，我们可以用如下关系来描述目标和基站之间的位置：
$$
(x_i-x)^2 + (y_i-y)^2 = (ct_i)^2
$$
由于这里我们可以不知道$ti$和$delay$，所以用(3)式代入：
$$
x_i^2+y_i^2+x^2+y^2-2x_ix-2y_iy = c^2\cdot(T_i-delay)^2\\
x_i^2+y_i^2+x^2+y^2-2x_ix-2y_iy = c^2T_i^2 + c^2delay^2-2c^2delay
$$
将$R = x^2+y^2$，$r_i = x_i^2 + y_i^2$代入：
$$
r_i - c^2T_i^2 = -R + 2x_ix + 2y_iy+ c^2delay^2 -2c^2delay
$$
每一个接收器写一个方程写成矩阵形式：
$$
\left[
\begin{matrix}
r_1 - c^2T_1^2 \\
r_2 - c^2T_2^2 \\
\vdots \\
r_n - c^2T_n^2
\end{matrix}
\right]
=
\left[
\begin{matrix}
-1 & 2x_1 & 2y_1 & c^2 & -2c^2\\
-1 & 2x_2 & 2y_2 & c^2 & -2c^2\\
\vdots &\vdots &\vdots & \vdots & \vdots\\
-1 & 2x_n & 2y_n & c^2 & -2c^2
\end{matrix}
\right]
\left[
\begin{matrix}
R\\
x\\
y\\
delay^2\\
delay
\end{matrix}
\right]
$$
将（7）式设为：
$$
B = AX
$$
求解其方程：
$$
X = (A^TA)^{-1}A^TB
$$
其中有技巧，为了可以求逆阵做了一些变换。那么其中$x$、$y$、$delay$就可以顺利求出

